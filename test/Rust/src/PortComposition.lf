
target Rust;
reactor Source {
    output out: i32;
    reaction(startup) -> out {=
        ctx.set(out, 76600)
    =}
}
reactor Sink {
  input inport: i32;
  reaction(inport) {=
    if let Some(value) = ctx.get(inport) {
        println!("received {}", value);
    } else {
        unreachable!()
    }
  =}
}
main reactor PortComposition {
      source = new Source();
      sink = new Sink();

      source.out -> sink.inport;
}
