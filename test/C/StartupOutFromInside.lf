target C;

reactor SOFIBar {
    output out:int;
    reaction(startup) -> out {=
        SET(out, 42);
    =}
}

main reactor StartupOutFromInside {
    bar = new SOFIBar();
    reaction(startup) bar.out {=
        printf("Output from bar: %d\n", bar.out->value);
        if (bar.out->value != 42) {
            fprintf(stderr, "Expected 42!\n");
            exit(1);
        }
    =}
}
