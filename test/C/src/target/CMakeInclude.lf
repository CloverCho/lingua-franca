/**
 * Test that cmake-include is working correctly.
 * The failure for this test is failure to compile.
 */
target C {
    cmake-include: [
        "../include/mlib-cmake-extension.cmake", 
        "../include/bar-cmake-compile-definition.txt"
    ],
    timeout: 0 sec
};

reactor Foo {
    preamble {=
        #include <math.h>
    =}
    reaction (startup) {=
        info_print("Maximum of 4.20 and %.2f is %.2f", BAR, fmax(4.20, BAR));
        
        // Check if FOO is defined, which is an error condition (@see federated/DistributedCMakeIncludeSeparateCompile.lf).
        #ifdef FOO
        #error "Failed to compile federates separately
        #endif // FOO
    =}
}

main reactor {
    f = new Foo();
}
