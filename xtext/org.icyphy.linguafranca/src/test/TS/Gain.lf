// Example in the Wiki.

    target TypeScript;
    reactor Scale(scale:number(2)) {
        input x:number;
        output y:number;
        reaction(x) x -> y {=
            y.set((x.get() as number) * self.scale);
        =}
    }
    reactor Test {
        input x:number;
        state received_value:boolean(false);
        reaction(x) x {=
            console.log("Received " + x.get() + ".");
            self.received_value = true;
            if ((x.get() as number) != 2) {
                console.log("ERROR: Expected 2!");
                self.util.failure();
                //throw new Error("ERROR: Expected 2!");
            }
        =}
        reaction(shutdown) {=
            if (!self.received_value){
                console.log("ERROR: No value received by Test reactor!");
                self.util.failure();
                //throw new Error("No value received by Test reactor!");
            } else {
                console.log("Test passes");
            }
        =}
    }
    main reactor Gain {
        g = new Scale();
        d = new Test();
        g.y -> d.x;
        reaction(startup) -> g.x {=
            g.x.set(1);
        =}
    }