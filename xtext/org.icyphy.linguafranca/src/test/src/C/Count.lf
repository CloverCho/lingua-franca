target C(
    run = "./Count -timeout 3 sec -fast"
);
reactor Count {
    output c:int;
    timer t(0, 1 sec);
    state i:int(0);
    reaction(t) -> c {=
        (self->i)++;
        set(c, self->i);
    =}
}
reactor Test {
    input c:int;
    state i:int(0);
    reaction(c) {=
        (self->i)++;
        if (c != self->i) {
            printf("ERROR: Expected %d but got %d\n.", self->i, c);
            exit(1);
        }
    =}
}
reactor Main {
    count = new Count();
    test = new Test();
    count.c -> test.c;
}

